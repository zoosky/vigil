// State machine implementation - Phase 3
